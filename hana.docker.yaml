# hana â€” Docker Development Configuration
# Use this config when running inside Docker network

execution:
  mode: upsert
  image_policy: replace
  dry_run: false
  parallel_skus: 1

schema:
  supported_versions: ["1.0"]
  unknown_version_policy: fail

slug:
  null_policy: from_title
  collision_policy: suffix

taxonomy:
  missing_term_policy: fallback
  fallback: pendente

media:
  dedup_strategy: checksum_meta
  checksum_algorithm: sha256
  featured_policy: first_gallery
  orphan_policy: detach
  media_ledger_path: /app/.hana/media_ledger.json

lock:
  strategy: filesystem
  timeout_seconds: 300
  cleanup_orphans: true

rate_limit:
  requests_per_second: 10
  burst: 20

retry:
  max_attempts: 3
  initial_delay_ms: 500
  max_delay_ms: 10000

backpressure:
  strategy: pause
  trigger: consecutive_errors
  threshold: 5
  cooldown_seconds: 30

degradation:
  media_failure: skip_media
  taxonomy_failure: use_fallback

update:
  null_policy: ignore
  missing_policy: ignore

failure_policy:
  post_then_media: mark_incomplete

ordering:
  strategy: sku_asc

signals:
  graceful_shutdown: true
  checkpoint_on_sigterm: true

logging:
  level: debug

ledger:
  path: /app/.hana/ledger.jsonl
  corruption_policy: fail

# WordPress connection (inside Docker network)
wp:
  base_url: http://wordpress
  user: admin
  app_password: REPLACE_WITH_APP_PASSWORD

paths:
  catalog_root: /data/catalog
